<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
        <% if (currentPage > 1) { %>
            <li class="page-item">
                <a class="page-link" href="?page=<%= currentPage - 1 %><%= Object.keys(query).filter(k => k !== 'page').map(k => '&' + k + '=' + query[k]).join('') %>">
                    <i class="fas fa-chevron-left"></i> Previous
                </a>
            </li>
        <% } else { %>
            <li class="page-item disabled">
                <span class="page-link"><i class="fas fa-chevron-left"></i> Previous</span>
            </li>
        <% } %>
        
        <% 
        let startPage = Math.max(1, currentPage - 2);
        let endPage = Math.min(totalPages, currentPage + 2);
        %>
        
        <% if (startPage > 1) { %>
            <li class="page-item">
                <a class="page-link" href="?page=1<%= Object.keys(query).filter(k => k !== 'page').map(k => '&' + k + '=' + query[k]).join('') %>">1</a>
            </li>
            <% if (startPage > 2) { %>
                <li class="page-item disabled"><span class="page-link">...</span></li>
            <% } %>
        <% } %>
        
        <% for (let i = startPage; i <= endPage; i++) { %>
            <li class="page-item <%= i === currentPage ? 'active' : '' %>">
                <a class="page-link" href="?page=<%= i %><%= Object.keys(query).filter(k => k !== 'page').map(k => '&' + k + '=' + query[k]).join('') %>"><%= i %></a>
            </li>
        <% } %>
        
        <% if (endPage < totalPages) { %>
            <% if (endPage < totalPages - 1) { %>
                <li class="page-item disabled"><span class="page-link">...</span></li>
            <% } %>
            <li class="page-item">
                <a class="page-link" href="?page=<%= totalPages %><%= Object.keys(query).filter(k => k !== 'page').map(k => '&' + k + '=' + query[k]).join('') %>"><%= totalPages %></a>
            </li>
        <% } %>
        
        <% if (currentPage < totalPages) { %>
            <li class="page-item">
                <a class="page-link" href="?page=<%= currentPage + 1 %><%= Object.keys(query).filter(k => k !== 'page').map(k => '&' + k + '=' + query[k]).join('') %>">
                    Next <i class="fas fa-chevron-right"></i>
                </a>
            </li>
        <% } else { %>
            <li class="page-item disabled">
                <span class="page-link">Next <i class="fas fa-chevron-right"></i></span>
            </li>
        <% } %>
    </ul>
</nav>
<p class="text-center text-muted">
    Showing page <%= currentPage %> of <%= totalPages %> (<%= totalItems %> items)
</p>
